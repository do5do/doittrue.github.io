function cropImage(t){drawCanvasTag();var e=$("#canvas")[0],a=$("#ratioImage")[0],o=e.getContext("2d"),n=a.getContext("2d");if(e.offsetWidth/e.offsetHeight<=t.width/t.height){var i=e.offsetHeight,c=i/t.height*t.width;a.width=c,a.height=i,n.drawImage(t,0,0,t.width,t.height,0,0,c,i)}else if(e.offsetWidth/e.offsetHeight>t.width/t.height){var r=e.offsetWidth,l=r/t.width*t.height;a.width=r,a.height=l,n.drawImage(t,0,0,t.width,t.height,0,0,r,l)}var s=a.toDataURL();$("#ratioImage").remove();var d=new Image;d.src=s,d.onload=function(){var a=e.offsetWidth,n=e.offsetHeight;e.offsetWidth/e.offsetHeight<=t.width/t.height?o.drawImage(d,d.width/2-e.offsetWidth/2,0,a,n,0,0,a,n):e.offsetWidth/e.offsetHeight>t.width/t.height&&o.drawImage(d,0,d.height/2-e.offsetHeight/2,a,n,0,0,a,n);var i=e.toDataURL();$("#canvas").remove(),$(".background").prepend('<div class="upload-thumb"><img src="'+i+'"></div>')}}function drawCanvasTag(){var t=$(window).width(),e=$(window).height();$("body").append('<canvas id="canvas" width="'+t+'" height="'+e+'"></canvas>')}function drawRatioCanvas(){$("body").append('<canvas id="ratioImage"></canvas>')}function drawCanvas(){html2canvas($(".background")[0],{backgroundColor:"#fff",backgroundImage:"url(/assets/images/body-noise.png)",scale:3}).then(function(t){t.toBlob(function(t){download(t,"image.png","image/png")})})}function onColorChange(t,e){el('[data-target="bg-color"] .circle').style.background=t.hexString,el(".background").style.background=t.hexString,handleNavColor(t.hsv.v<=25?"#fff":"#000")}function onColorChangeText(t,e){el('[data-target="tx-color"] .circle').style.background=t.hexString,el(".text-value").style.color=t.hexString,el("textarea").style.color=t.hexString}function handleNavColor(t){el("header").style.color=t,elAll(".align-box .align").forEach(function(e){e.style.background=t}),elAll(".plus").forEach(function(e){e.style.background=t}),el('[data-target="bg-color"] .stroke').style.borderColor=t,el("footer").style.color=t,elAll("footer svg .cls-1").forEach(function(e){e.style.stroke=t}),elAll("footer svg .cls-2").forEach(function(e){e.style.stroke=t}),elAll(".dim-box svg path").forEach(function(e){e.style.fill=t}),elAll(".dim-box svg rect").forEach(function(e){e.style.fill=t})}function applyFill(t){var e=100*(t.value-t.min)/(t.max-t.min),a="linear-gradient(90deg,"+settings.fill+" "+e+"%,"+settings.background+" "+(e+.1)+"%)";t.style.background=a}$(function(){drawRatioCanvas(),$("[data-save]").on("mousedown",function(){$("header").css("opacity","0"),$("footer").css("opacity","0"),drawCanvas()}),$("[data-save]").on("mouseup",function(){$("header").css("opacity","1"),$("footer").css("opacity","1")}),$("#upload-input").on("change",function(){var t=new FileReader;t.onload=function(){var e=new Image;e.src=t.result,e.onload=function(){cropImage(e)}},t.readAsDataURL($(this)[0].files[0]),$('[data-target="bg-color"] .circle.stroke').css("background","transparent"),$("header").css("background","rgba(225, 225, 225, 0.46)"),$("footer").css("background","rgba(225, 225, 225, 0.46)"),handleNavColor("#000"),"block"===$(".upload-img").css("display")?($(".upload-img").hide(),$(".delete-img").show(),$(".dim-box").show()):($(".delete-img").hide(),$(".upload-img").show(),$(".dim-box").hide())}),$(".delete-img").on("click",function(){var t=$('[data-target="tx-color"] .circle').css("background"),e=$('[data-target="bg-color"] .circle').css("background");$(".upload-thumb").remove(),$("#upload-input").val(""),$(this).hide(),$(".upload-img").show(),$(".dim-box").hide(),$('[data-target="bg-color"] .circle').css("background",e),$("header").css("background","transparent"),$("footer").css("background","transparent"),$(".text-value, textarea").css({"text-shadow":"none",color:t})}),$(".dim").on("click",function(){$(".upload-thumb").prepend('<div class="dimmed-bg"></div>'),$(".text-value, textarea").css({"text-shadow":"1px 1px 8px rgba(0, 0, 0, 0.3)",color:"#fff"}),$(this).hide(),$(".transparent").show()}),$(".transparent").on("click",function(){var t=$('[data-target="tx-color"] .circle').css("background");$(".dimmed-bg").remove(),$(this).hide(),$(".text-value, textarea").css({"text-shadow":"none",color:t}),$(".dim").show()})}),$(function(){!function(){var t={Android:function(){return null!=navigator.userAgent.match(/Android/i)},iOS:function(){return null!=navigator.userAgent.match(/iPhone|iPad|iPod/i)},any:function(){return t.Android()||t.iOS()}};t.any()&&(t.Android()?($('[data-font="Apple SD Gothic Neo"]').hide(),$('[data-font="Noto Sans KR"]').addClass("selected")):t.iOS()&&$('[data-font="Apple SD Gothic Neo"]').show())}(),$("[data-target]").on("click",function(){$("[data-modal]").hide()}),$("[data-close]").on("click",function(){$("[data-modal]").hide()}),$("[data-modal]").on("click",function(t){t.target===this&&$(this).hide()}),$('[data-target="modal"]').on("click",function(){var t=$(".select-list").find("li.selected").closest("ul").index();$(".select-list").hide(),$(".tab").removeClass("selected"),$(".tab-0"+t).addClass("selected"),$(".select-list__0"+t).show(),$('[data-modal="select"]').show()}),$("[data-tab]").on("click",function(){$("[data-tab]").removeClass("selected"),$(this).addClass("selected");var t=$(this).index()+1;$(".select-list").hide(),$(".select-list__0"+t).show()}),$(".select-list li").on("click",function(){$(".select-list li").removeClass("selected"),$(this).addClass("selected");var t=$(this).data("font");$(".text-value, textarea").css("font-family",t)}),$(".align-box").on("click",function(){"left"===$(this).css("text-align")?($(this).css("text-align","center"),$(".text-value, textarea").css("text-align","center")):"center"===$(this).css("text-align")?($(this).css("text-align","right"),$(".text-value, textarea").css("text-align","right")):($(this).css("text-align","left"),$(".text-value, textarea").css("text-align","left"))}),$('[data-target="text"]').on("click",function(){$('[data-modal="text"]').show()}),$('[data-target="bg-color"]').on("click",function(){$('[data-modal="bg-color"]').show()}),$('[data-target="tx-color"]').on("click",function(){$('[data-modal="tx-color"]').show()}),$('[data-range="size"]').on("input",function(){var t=$(this).val();$(".text-value").css("font-size",t+"px"),$("textarea").css("font-size",t+"px")}),$('[data-range="weight"]').on("input",function(){var t=$(this).val();$(".text-value").css("font-weight",t),$("textarea").css("font-weight",t)}),$('[data-range="line-height"]').on("input",function(){var t=$(this).val();$(".text-value").css("line-height",t+"px"),$("textarea").css("line-height",t+"px")})});var el=function(t){return document.querySelector(t)},elAll=function(t){return document.querySelectorAll(t)},colorPicker=new iro.ColorPicker("#color-picker-container",{width:280,sliderMargin:20,color:"#fff"}),colorPickerText=new iro.ColorPicker("#color-picker-container__02",{width:280,sliderMargin:20,color:"#000"}),hex=colorPicker.color.hexString,hex2=colorPickerText.color.hexString;colorPicker.on("color:change",onColorChange),colorPickerText.on("color:change",onColorChangeText);var settings={fill:"#000",background:"rgba(0, 0, 0, 0.1)"},sliders=document.querySelectorAll(".range__box");Array.prototype.forEach.call(sliders,function(t){t.querySelector("input").addEventListener("input",function(t){applyFill(t.target)}),applyFill(t.querySelector("input"))});var delayFunc=function(t,e){void 0===e&&(e=0);var a=(new Date).valueOf();setTimeout(function(){(new Date).valueOf()-a>e+10?delayFunc(t,e):t()},e)};document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),delayFunc(function(){$("#page-preloader").fadeOut(500),$("body").css("overflow","auto")},100)},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),delayFunc(function(){$("#page-preloader").fadeOut(500),$("body").css("overflow","auto")},100))});